<?xml version="1.0" encoding="utf-8"?>
<Simulations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Name>Simulations</Name>
  <Memo>
    <Name>Memo</Name>
    <MemoText><![CDATA[
  replace cover with a k and calculate
  ]]></MemoText>
  </Memo>
  <Simulation>
    <Name>SlurpOne</Name>
    <Weather>
      <Name>Weather</Name>
      <FileName>ForeverSpringNoRain.met</FileName>
    </Weather>
    <Clock>
      <Name>Clock</Name>
      <StartDate>2000-01-01T00:00:00</StartDate>
      <EndDate>2000-01-31T00:00:00</EndDate>
    </Clock>
    <Summary>
      <Name>Summary</Name>
    </Summary>
    <Zone>
      <Name>Field</Name>
      <Soil>
        <Name>Soil</Name>
        <Water>
          <Name>Water</Name>
          <SoilCrop>
            <Name>SlurpSoil</Name>
            <LL>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
            </LL>
            <KL>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </KL>
            <XF>
              <double>1</double>
              <double>1</double>
              <double>1</double>
              <double>1</double>
            </XF>
          </SoilCrop>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <BD>
            <double>1</double>
            <double>1</double>
            <double>1</double>
            <double>1</double>
          </BD>
          <AirDry>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
          </AirDry>
          <LL15>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
          </LL15>
          <DUL>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
          </DUL>
          <SAT>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
          </SAT>
          <KS>
            <double>100</double>
            <double>100</double>
            <double>100</double>
            <double>100</double>
          </KS>
        </Water>
        <SoilWater>
          <Name>SoilWater</Name>
          <residueinterception>0</residueinterception>
          <SummerDate>1-Nov</SummerDate>
          <SummerU>6</SummerU>
          <SummerCona>3</SummerCona>
          <WinterDate>1-Apr</WinterDate>
          <WinterU>6</WinterU>
          <WinterCona>3</WinterCona>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <CN2Bare>73</CN2Bare>
          <CNRed>20</CNRed>
          <CNCov>0.8</CNCov>
          <slope>0</slope>
          <discharge_width>0</discharge_width>
          <catchment_area>0</catchment_area>
          <max_pond>0</max_pond>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <SWCON>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </SWCON>
          <KLAT>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </KLAT>
        </SoilWater>
        <SoilNitrogen>
          <Name>SoilNitrogen</Name>
          <fom_type>
            <string>default</string>
            <string>manure</string>
            <string>mucuna</string>
            <string>lablab</string>
            <string>shemp</string>
            <string>stable</string>
          </fom_type>
          <fract_carb>
            <double>0.2</double>
            <double>0.3</double>
            <double>0.54</double>
            <double>0.57</double>
            <double>0.45</double>
            <double>0</double>
          </fract_carb>
          <fract_cell>
            <double>0.7</double>
            <double>0.3</double>
            <double>0.37</double>
            <double>0.37</double>
            <double>0.47</double>
            <double>0.1</double>
          </fract_cell>
          <fract_lign>
            <double>0.1</double>
            <double>0.4</double>
            <double>0.09</double>
            <double>0.06</double>
            <double>0.08</double>
            <double>0.9</double>
          </fract_lign>
          <wfpsN2N2O_x>
            <double>22</double>
            <double>88</double>
          </wfpsN2N2O_x>
          <wfpsN2N2O_y>
            <double>0.1</double>
            <double>1</double>
          </wfpsN2N2O_y>
          <oc>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </oc>
        </SoilNitrogen>
        <SoilOrganicMatter>
          <Name>SoilOrganicMatter</Name>
          <RootCN>40</RootCN>
          <RootWt>0</RootWt>
          <SoilCN>12.5</SoilCN>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <Depth>
            <string>0-15</string>
            <string>15-30</string>
            <string>30-60</string>
            <string>60-90</string>
          </Depth>
          <OC>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </OC>
          <FBiom>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </FBiom>
          <FInert>
            <double>1</double>
            <double>1</double>
            <double>1</double>
            <double>1</double>
          </FInert>
          <OCUnits>Total</OCUnits>
        </SoilOrganicMatter>
        <Analysis>
          <Name>Analysis</Name>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <EC>
            <double>0.2</double>
            <double>0.25</double>
            <double>0.31</double>
            <double>0.4</double>
          </EC>
          <PH>
            <double>8.4</double>
            <double>8.8</double>
            <double>9</double>
            <double>9.2</double>
          </PH>
          <PHUnits>Water</PHUnits>
          <BoronUnits>HotWater</BoronUnits>
        </Analysis>
        <InitialWater>
          <Name>Initial water</Name>
          <PercentMethod>EvenlyDistributed</PercentMethod>
          <FractionFull>1</FractionFull>
          <DepthWetSoil>NaN</DepthWetSoil>
          <RelativeTo>LL15</RelativeTo>
        </InitialWater>
        <Sample>
          <Name>Sample</Name>
          <Thickness>
            <double>100</double>
            <double>200</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <NO3>
            <double>40</double>
            <double>30</double>
            <double>14</double>
            <double>14</double>
          </NO3>
          <NH4>
            <double>0.1</double>
            <double>0.1</double>
            <double>0.1</double>
            <double>0.1</double>
          </NH4>
          <NO3Units>kgha</NO3Units>
          <NH4Units>kgha</NH4Units>
          <SWUnits>Volumetric</SWUnits>
          <OCUnits>Total</OCUnits>
          <PHUnits>Water</PHUnits>
        </Sample>
        <RecordNumber>0</RecordNumber>
        <SoilType>Uniform soil</SoilType>
        <Latitude>0</Latitude>
        <Longitude>0</Longitude>
      </Soil>
      <SurfaceOrganicMatter>
        <Name>SurfaceOrganicMatter</Name>
        <PondActive>no</PondActive>
        <ReportAdditions>no</ReportAdditions>
        <ReportRemovals>no</ReportRemovals>
        <ResidueTypes>
          <Name>ResidueTypes</Name>
          <LoadFromResource>ResidueTypes</LoadFromResource>
        </ResidueTypes>
        <TillageTypes>
          <Name>TillageTypesList</Name>
          <TillageType />
        </TillageTypes>
        <Pools>
          <Pool>
            <PoolName>Slurp</PoolName>
            <ResidueType>Slurp</ResidueType>
            <Mass>0</Mass>
            <CNRatio>80</CNRatio>
            <CPRatio>NaN</CPRatio>
            <StandingFraction>0</StandingFraction>
          </Pool>
        </Pools>
        <PoolName>Slurp</PoolName>
        <type>Slurp</type>
        <mass>0</mass>
        <standing_fraction>0</standing_fraction>
        <cpr />
        <cnr>80</cnr>
        <CriticalResidueWeight>2000</CriticalResidueWeight>
        <OptimumDecompTemp>20</OptimumDecompTemp>
        <MaxCumulativeEOS>20</MaxCumulativeEOS>
        <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
        <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
        <TotalLeachRain>25</TotalLeachRain>
        <MinRainToLeach>10</MinRainToLeach>
        <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
        <DefaultCPRatio>0</DefaultCPRatio>
        <DefaultStandingFraction>0</DefaultStandingFraction>
        <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
        <FractionFaecesAdded>0.5</FractionFaecesAdded>
      </SurfaceOrganicMatter>
      <Manager>
        <Name>SlurpUpdates</Name>
        <Script>
          <DateToUpdate>1990-01-01</DateToUpdate>
          <VariableToUpdate>[Slurp].CanopyProperties.LAI</VariableToUpdate>
          <tempValue>3.5</tempValue>
        </Script>
        <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.PMF.Slurp;
namespace Models
{
	[Serializable]
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Slurp Slurp;
		[Link] Summary Summary;
		[Link] Zone zone;			
		
		[Description("Date to change states or properties")] public DateTime DateToUpdate {get; set;}
		[Description("Variable to update (e.g. LAI, LAItot, CoverGreen")] public string VariableToUpdate {get; set;}        
        [Description("Value to update to")] public double tempValue { get; set; }

		public string myString;

        [EventSubscribe("Commencing")]
        private void OnSimulationCommencing(object sender, EventArgs e)
		{
		}
		
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{	
			if (Clock.Today == DateToUpdate)
			{
                myString="SlurpUpdates is resetting the value of " + VariableToUpdate + " to " + tempValue.ToString();
			    Summary.WriteMessage(this, myString);
			    zone.Set(VariableToUpdate, tempValue);
			}
        }
	}
}
]]></Code>
      </Manager>
      <Manager>
        <Name>Diffs</Name>
        <Script />
        <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.PMF.Slurp;
using System.Xml.Serialization;
namespace Models
{
	[Serializable]
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Slurp Slurp;
		[Link] Summary Summary;
		[Link] Soils.Soil Soil;

		public string myString;
        private double tempSum;

        [XmlIgnore] public double initSWDep { get; set; }
        [XmlIgnore] public double currSWDep { get; set; }
        [XmlIgnore] public double diffSWDepUptake { get; set; }

        [XmlIgnore] public double initMinN { get; set; }
        [XmlIgnore] public double currMinN { get; set; }
        [XmlIgnore] public double diffMinNUptake { get; set; }

        [EventSubscribe("Commencing")]
        private void OnSimulationCommencing(object sender, EventArgs e)
		{
		}

		[EventSubscribe("DoDailyInitialisation")]
		private void DoDailyInitialisation(object sender, EventArgs e)
		{
		    initSWDep = 0.0;
		    initMinN = 0.0;
		    for (int j = 0; j < Soil.Thickness.Length; j++)
		    {
		       initSWDep += Soil.SoilWater.SWmm[j];
		       initMinN += Soil.NO3N[j] + Soil.NH4N[j];
		    }
		}
		
		[EventSubscribe("DoManagementCalculations")]
		private void DoManagementCalculations(object sender, EventArgs e)
		{	
		    currSWDep = 0.0;
		    currMinN = 0.0;
		    for (int j = 0; j < Soil.Thickness.Length; j++)
		    {
		       currSWDep += Soil.SoilWater.SWmm[j];
		       currMinN += Soil.NO3N[j] + Soil.NH4N[j];

			   // Summary.WriteMessage(this, (Soil.SoilWater.SWmm[j].ToString() + " " + currSWDep.ToString()));
		    }
            diffSWDepUptake = (initSWDep - currSWDep) - Soil.SoilWater.Es;
            diffMinNUptake = (initMinN - currMinN); // what about denitrification?
        }
	}
}
]]></Code>
      </Manager>
      <Slurp>
        <Name>Slurp</Name>
        <CropType>Slurp</CropType>
        <localLAIGreen>5</localLAIGreen>
        <localLAItot>5</localLAItot>
        <localLightExtinction>0.6</localLightExtinction>
        <localCanopyHeight>500</localCanopyHeight>
        <localCanopyDepth>500</localCanopyDepth>
        <localMaximumStomatalConductance>0.011</localMaximumStomatalConductance>
        <localFrgr>1</localFrgr>
        <localDemandWater>10</localDemandWater>
        <localDemandNitrogen>5</localDemandNitrogen>
        <localKNO3>0.1</localKNO3>
        <localKNH4>0</localKNH4>
        <localRootDepth>500</localRootDepth>
        <localSurfaceRootLengthDensity>0.05</localSurfaceRootLengthDensity>
      </Slurp>
      <Arbitrator>
        <Name>Arbitrator</Name>
        <ArbitrationMethod>new</ArbitrationMethod>
        <NutrientUptakeMethod>1</NutrientUptakeMethod>
      </Arbitrator>
      <Report>
        <Name>ReportOne</Name>
        <VariableNames>
          <string>[Clock].Today</string>
          <string>Slurp.demandWater as demandWater</string>
          <string>sum(Slurp.uptakeWater[1:4]) as UptakeWater</string>
          <string>sum([Soil].SoilWater.SWmm[1:4]) as SWDep</string>
          <string>[Diffs].Script.diffSWDepUptake as deltaSWDep</string>
          <string>Slurp.demandNitrogen as demandNitrogen</string>
          <string>sum(Slurp.uptakeNitrogen[1:4]) as UptakeNitrogen</string>
          <string>sum(Slurp.uptakeNitrogenPropNO3[1:4]) as UptakeNPropNO3</string>
          <string>(sum([Soil].NH4N[1:4]) + sum([Soil].NO3N[1:4]) as MinN</string>
          <string>[Diffs].Script.diffMinNUptake as deltaMinN</string>
          <string>[Soil]SoilNitrogen.NH4</string>
          <string>[SOil]SoilNitrogen.NO3</string>
          <string>Slurp.uptakeNitrogenPropNO3</string>
        </VariableNames>
        <EventNames>
          <string>[Clock].DoReport</string>
        </EventNames>
      </Report>
      <Area>0</Area>
      <Slope>0</Slope>
    </Zone>
    <Graph>
      <Name>Graph1</Name>
      <Axis>
        <Type>Bottom</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Right</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Series>
        <Title>Series1</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744193</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportOne</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportOne</TableName>
          <FieldName>demandWater</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series2</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744193</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportOne</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportOne</TableName>
          <FieldName>UptakeWater</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series3</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-32513</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportOne</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportOne</TableName>
          <FieldName>demandNitrogen</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>false</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series4</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-32513</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportOne</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportOne</TableName>
          <FieldName>UptakeNitrogen</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>false</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <LegendPosition>TopRight</LegendPosition>
      <ShowRegressionLine>false</ShowRegressionLine>
      <DisabledSeries />
    </Graph>
    <Area>0</Area>
    <Slope>0</Slope>
  </Simulation>
  <Simulation>
    <Name>SlurpTwo</Name>
    <Weather>
      <Name>Weather</Name>
      <FileName>ForeverSpringNoRain.met</FileName>
    </Weather>
    <Clock>
      <Name>Clock</Name>
      <StartDate>2000-01-01T00:00:00</StartDate>
      <EndDate>2000-01-31T00:00:00</EndDate>
    </Clock>
    <Summary>
      <Name>Summary</Name>
    </Summary>
    <Zone>
      <Name>Field</Name>
      <Soil>
        <Name>Soil</Name>
        <Water>
          <Name>Water</Name>
          <SoilCrop>
            <Name>Slurp1Soil</Name>
            <LL>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
            </LL>
            <KL>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </KL>
            <XF>
              <double>1</double>
              <double>1</double>
              <double>1</double>
              <double>1</double>
            </XF>
          </SoilCrop>
          <SoilCrop>
            <Name>Slurp2Soil</Name>
            <LL>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
            </LL>
            <KL>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </KL>
            <XF>
              <double>1</double>
              <double>1</double>
              <double>1</double>
              <double>1</double>
            </XF>
          </SoilCrop>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <BD>
            <double>1</double>
            <double>1</double>
            <double>1</double>
            <double>1</double>
          </BD>
          <AirDry>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
          </AirDry>
          <LL15>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
          </LL15>
          <DUL>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
          </DUL>
          <SAT>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
          </SAT>
          <KS>
            <double>100</double>
            <double>100</double>
            <double>100</double>
            <double>100</double>
          </KS>
        </Water>
        <SoilWater>
          <Name>SoilWater</Name>
          <residueinterception>0</residueinterception>
          <SummerDate>1-Nov</SummerDate>
          <SummerU>6</SummerU>
          <SummerCona>3</SummerCona>
          <WinterDate>1-Apr</WinterDate>
          <WinterU>6</WinterU>
          <WinterCona>3</WinterCona>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <CN2Bare>73</CN2Bare>
          <CNRed>20</CNRed>
          <CNCov>0.8</CNCov>
          <slope>0</slope>
          <discharge_width>0</discharge_width>
          <catchment_area>0</catchment_area>
          <max_pond>0</max_pond>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <SWCON>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </SWCON>
          <KLAT>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </KLAT>
        </SoilWater>
        <SoilNitrogen>
          <Name>SoilNitrogen</Name>
          <fom_type>
            <string>default</string>
            <string>manure</string>
            <string>mucuna</string>
            <string>lablab</string>
            <string>shemp</string>
            <string>stable</string>
          </fom_type>
          <fract_carb>
            <double>0.2</double>
            <double>0.3</double>
            <double>0.54</double>
            <double>0.57</double>
            <double>0.45</double>
            <double>0</double>
          </fract_carb>
          <fract_cell>
            <double>0.7</double>
            <double>0.3</double>
            <double>0.37</double>
            <double>0.37</double>
            <double>0.47</double>
            <double>0.1</double>
          </fract_cell>
          <fract_lign>
            <double>0.1</double>
            <double>0.4</double>
            <double>0.09</double>
            <double>0.06</double>
            <double>0.08</double>
            <double>0.9</double>
          </fract_lign>
          <wfpsN2N2O_x>
            <double>22</double>
            <double>88</double>
          </wfpsN2N2O_x>
          <wfpsN2N2O_y>
            <double>0.1</double>
            <double>1</double>
          </wfpsN2N2O_y>
          <oc>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </oc>
        </SoilNitrogen>
        <SoilOrganicMatter>
          <Name>SoilOrganicMatter</Name>
          <RootCN>40</RootCN>
          <RootWt>0</RootWt>
          <SoilCN>12.5</SoilCN>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <Depth>
            <string>0-15</string>
            <string>15-30</string>
            <string>30-60</string>
            <string>60-90</string>
          </Depth>
          <OC>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </OC>
          <FBiom>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </FBiom>
          <FInert>
            <double>1</double>
            <double>1</double>
            <double>1</double>
            <double>1</double>
          </FInert>
          <OCUnits>Total</OCUnits>
        </SoilOrganicMatter>
        <Analysis>
          <Name>Analysis</Name>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <EC>
            <double>0.2</double>
            <double>0.25</double>
            <double>0.31</double>
            <double>0.4</double>
          </EC>
          <PH>
            <double>8.4</double>
            <double>8.8</double>
            <double>9</double>
            <double>9.2</double>
          </PH>
          <PHUnits>Water</PHUnits>
          <BoronUnits>HotWater</BoronUnits>
        </Analysis>
        <InitialWater>
          <Name>Initial water</Name>
          <PercentMethod>EvenlyDistributed</PercentMethod>
          <FractionFull>1</FractionFull>
          <DepthWetSoil>NaN</DepthWetSoil>
          <RelativeTo>LL15</RelativeTo>
        </InitialWater>
        <Sample>
          <Name>Sample</Name>
          <Thickness>
            <double>100</double>
            <double>200</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <NO3>
            <double>100</double>
            <double>50</double>
            <double>20</double>
            <double>10</double>
          </NO3>
          <NH4>
            <double>10</double>
            <double>5</double>
            <double>0.1</double>
            <double>0.1</double>
          </NH4>
          <SW>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </SW>
          <OC>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </OC>
          <EC>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </EC>
          <CL>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </CL>
          <ESP>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </ESP>
          <PH>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
            <double>NaN</double>
          </PH>
          <NO3Units>kgha</NO3Units>
          <NH4Units>kgha</NH4Units>
          <SWUnits>Volumetric</SWUnits>
          <OCUnits>Total</OCUnits>
          <PHUnits>Water</PHUnits>
        </Sample>
        <RecordNumber>0</RecordNumber>
        <SoilType>Uniform soil</SoilType>
        <Latitude>0</Latitude>
        <Longitude>0</Longitude>
      </Soil>
      <SurfaceOrganicMatter>
        <Name>SurfaceOrganicMatter</Name>
        <PondActive>no</PondActive>
        <ReportAdditions>no</ReportAdditions>
        <ReportRemovals>no</ReportRemovals>
        <ResidueTypes>
          <Name>ResidueTypes</Name>
          <LoadFromResource>ResidueTypes</LoadFromResource>
        </ResidueTypes>
        <TillageTypes>
          <Name>TillageTypesList</Name>
          <TillageType />
        </TillageTypes>
        <Pools>
          <Pool>
            <PoolName>Slurp</PoolName>
            <ResidueType>Slurp</ResidueType>
            <Mass>0</Mass>
            <CNRatio>80</CNRatio>
            <CPRatio>NaN</CPRatio>
            <StandingFraction>0</StandingFraction>
          </Pool>
        </Pools>
        <PoolName>Slurp</PoolName>
        <type>Slurp</type>
        <mass>0</mass>
        <standing_fraction>0</standing_fraction>
        <cpr />
        <cnr>80</cnr>
        <CriticalResidueWeight>2000</CriticalResidueWeight>
        <OptimumDecompTemp>20</OptimumDecompTemp>
        <MaxCumulativeEOS>20</MaxCumulativeEOS>
        <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
        <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
        <TotalLeachRain>25</TotalLeachRain>
        <MinRainToLeach>10</MinRainToLeach>
        <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
        <DefaultCPRatio>0</DefaultCPRatio>
        <DefaultStandingFraction>0</DefaultStandingFraction>
        <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
        <FractionFaecesAdded>0.5</FractionFaecesAdded>
      </SurfaceOrganicMatter>
      <Manager>
        <Name>Diffs</Name>
        <Script />
        <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.PMF.Slurp;
using System.Xml.Serialization;
namespace Models
{
	[Serializable]
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Summary Summary;
		[Link] Soils.Soil Soil;

		public string myString;
        private double tempSum;

        [XmlIgnore] public double initSWDep { get; set; }
        [XmlIgnore] public double currSWDep { get; set; }
        [XmlIgnore] public double diffSWDepUptake { get; set; }

        [XmlIgnore] public double initMinN { get; set; }
        [XmlIgnore] public double currMinN { get; set; }
        [XmlIgnore] public double diffMinNUptake { get; set; }

        [EventSubscribe("Commencing")]
        private void OnSimulationCommencing(object sender, EventArgs e)
		{
		}

		[EventSubscribe("DoDailyInitialisation")]
		private void DoDailyInitialisation(object sender, EventArgs e)
		{
		    initSWDep = 0.0;
		    initMinN = 0.0;
		    for (int j = 0; j < Soil.Thickness.Length; j++)
		    {
		       initSWDep += Soil.SoilWater.SWmm[j];
		       initMinN += Soil.NO3N[j] + Soil.NH4N[j];
		    }
		}
		
		[EventSubscribe("DoManagementCalculations")]
		private void DoManagementCalculations(object sender, EventArgs e)
		{	
		    currSWDep = 0.0;
		    currMinN = 0.0;
		    for (int j = 0; j < Soil.Thickness.Length; j++)
		    {
		       currSWDep += Soil.SoilWater.SWmm[j];
		       currMinN += Soil.NO3N[j] + Soil.NH4N[j];

			   // Summary.WriteMessage(this, (Soil.SoilWater.SWmm[j].ToString() + " " + currSWDep.ToString()));
		    }
            diffSWDepUptake = (initSWDep - currSWDep) - Soil.SoilWater.Es;
            diffMinNUptake = (initMinN - currMinN); // what about denitrification?
        }
	}
}
]]></Code>
      </Manager>
      <Slurp>
        <Name>Slurp1</Name>
        <CropType>Slurp</CropType>
        <localLAIGreen>0</localLAIGreen>
        <localLAItot>5</localLAItot>
        <localLightExtinction>0.6</localLightExtinction>
        <localCanopyHeight>500</localCanopyHeight>
        <localCanopyDepth>500</localCanopyDepth>
        <localMaximumStomatalConductance>0.01</localMaximumStomatalConductance>
        <localFrgr>1</localFrgr>
        <localDemandWater>5</localDemandWater>
        <localDemandNitrogen>5</localDemandNitrogen>
        <localKNO3>0.2</localKNO3>
        <localKNH4>0.2</localKNH4>
        <localRootDepth>300</localRootDepth>
        <localSurfaceRootLengthDensity>0.05</localSurfaceRootLengthDensity>
      </Slurp>
      <Slurp>
        <Name>Slurp2</Name>
        <CropType>Slurp</CropType>
        <localLAIGreen>0</localLAIGreen>
        <localLAItot>7.5</localLAItot>
        <localLightExtinction>0.6</localLightExtinction>
        <localCanopyHeight>750</localCanopyHeight>
        <localCanopyDepth>750</localCanopyDepth>
        <localMaximumStomatalConductance>0.01</localMaximumStomatalConductance>
        <localFrgr>1</localFrgr>
        <localDemandWater>7.5</localDemandWater>
        <localDemandNitrogen>7.5</localDemandNitrogen>
        <localKNO3>0.2</localKNO3>
        <localKNH4>0.2</localKNH4>
        <localRootDepth>600</localRootDepth>
        <localSurfaceRootLengthDensity>0.05</localSurfaceRootLengthDensity>
      </Slurp>
      <Arbitrator>
        <Name>Arbitrator</Name>
        <ArbitrationMethod>new</ArbitrationMethod>
        <NutrientUptakeMethod>1</NutrientUptakeMethod>
      </Arbitrator>
      <Report>
        <Name>ReportWater</Name>
        <VariableNames>
          <string>[Clock].Today</string>
          <string>sum([Soil].SoilWater.SWmm[1:4]) as SWDep</string>
          <string>[Diffs].Script.diffSWDepUptake</string>
          <string>Slurp1.demandWater</string>
          <string>Slurp2.demandWater</string>
          <string>sum(Slurp1.uptakeWater[1:4]) as Slurp1Uptake</string>
          <string>sum(Slurp2.uptakeWater[1:4]) as Slurp2Uptake</string>
          <string>Slurp1.uptakeWater[4]</string>
          <string>Slurp2.uptakeWater[4]</string>
        </VariableNames>
        <EventNames>
          <string>[Clock].DoReport</string>
        </EventNames>
      </Report>
      <Report>
        <Name>ReportNitrogen</Name>
        <VariableNames>
          <string>[Clock].Today</string>
          <string>Slurp1.demandNitrogen as demandNitrogen1</string>
          <string>Slurp2.demandNitrogen as demandNitrogen2</string>
          <string>sum(Slurp1.uptakeNitrogen[1:4]) as Slurp1UptakeN</string>
          <string>sum(Slurp2.uptakeNitrogen[1:4]) as Slurp2UptakeN</string>
          <string>(sum([Soil].NH4N[1:4]) + sum([Soil].NO3N[1:4]) as MinN</string>
          <string>[Diffs].Script.diffMinNUptake</string>
        </VariableNames>
        <EventNames>
          <string>[Clock].DoReport</string>
        </EventNames>
      </Report>
      <Area>0</Area>
      <Slope>0</Slope>
    </Zone>
    <Graph>
      <Name>GraphWater2</Name>
      <Axis>
        <Type>Bottom</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Right</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Series>
        <Title>Series1</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16776961</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportWater</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportWater</TableName>
          <FieldName>Slurp1.demandWater</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series2</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16776961</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportWater</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportWater</TableName>
          <FieldName>Slurp1Uptake</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series3</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744320</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportWater</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportWater</TableName>
          <FieldName>Slurp2.demandWater</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series4</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744320</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportWater</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportWater</TableName>
          <FieldName>Slurp2Uptake</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series5</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-65536</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportWater</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportWater</TableName>
          <FieldName>Diffs.Script.diffSWDepUptake</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <LegendPosition>TopRight</LegendPosition>
      <ShowRegressionLine>false</ShowRegressionLine>
      <DisabledSeries />
    </Graph>
    <Graph>
      <Name>GraphNitrogen2</Name>
      <Axis>
        <Type>Bottom</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Right</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Series>
        <Title>Series1</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16776961</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportNitrogen</TableName>
          <FieldName>demandNitrogen1</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series2</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16776961</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Slurp1UptakeN</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series3</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744320</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportNitrogen</TableName>
          <FieldName>demandNitrogen2</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series4</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16744320</ColourArgb>
        <Marker>None</Marker>
        <Line>Dash</Line>
        <X>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Slurp2UptakeN</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <Series>
        <Title>Series5</Title>
        <Type>Line</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-32513</ColourArgb>
        <Marker>None</Marker>
        <Line>Solid</Line>
        <X>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Clock.Today</FieldName>
        </X>
        <Y>
          <TableName>ReportNitrogen</TableName>
          <FieldName>Diffs.Script.diffMinNUptake</FieldName>
        </Y>
        <ShowRegressionLine>false</ShowRegressionLine>
        <ShowInLegend>true</ShowInLegend>
        <SplitOn>Simulation</SplitOn>
      </Series>
      <LegendPosition>TopRight</LegendPosition>
      <ShowRegressionLine>false</ShowRegressionLine>
      <DisabledSeries />
    </Graph>
    <Area>0</Area>
    <Slope>0</Slope>
  </Simulation>
  <DataStore>
    <Name>DataStore</Name>
    <AutoExport>false</AutoExport>
  </DataStore>
  <ExplorerWidth>250</ExplorerWidth>
</Simulations>